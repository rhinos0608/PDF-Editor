3e605f57d12e9c94d0d13f9f688c6137
/**
 * Security Validation Tests
 * Tests input validation and security measures
 */

describe('Security Validation', () => {
  describe('Input Validation', () => {
    // Test the validation functions from main.js
    const mockValidateSender = event => {
      if (!event.sender) throw new Error('No sender');
      // Simulate validation logic
      return true;
    };
    const mockValidateFilePath = filePath => {
      if (!filePath || typeof filePath !== 'string') {
        throw new Error('Invalid file path');
      }
      if (filePath.length > 260) {
        throw new Error('File path too long');
      }
      if (filePath.includes('..') || filePath.includes('~')) {
        throw new Error('Invalid file path - path traversal detected');
      }
      return filePath;
    };
    const mockValidateFileData = data => {
      if (!data) {
        throw new Error('No file data provided');
      }
      if (data.byteLength > 100 * 1024 * 1024) {
        throw new Error('File too large (max 100MB)');
      }
      return data;
    };
    describe('Sender Validation', () => {
      it('should reject invalid sender', () => {
        expect(() => mockValidateSender({})).toThrow('No sender');
        expect(() => mockValidateSender(null)).toThrow('No sender');
        expect(() => mockValidateSender(undefined)).toThrow('No sender');
      });
      it('should accept valid sender', () => {
        const validEvent = {
          sender: {
            isDestroyed: () => false
          }
        };
        expect(() => mockValidateSender(validEvent)).not.toThrow();
      });
    });
    describe('File Path Validation', () => {
      it('should reject path traversal attempts', () => {
        expect(() => mockValidateFilePath('../../../etc/passwd')).toThrow('path traversal');
        expect(() => mockValidateFilePath('..\\windows\\system32')).toThrow('path traversal');
        expect(() => mockValidateFilePath('~/.ssh/id_rsa')).toThrow('path traversal');
        expect(() => mockValidateFilePath('file../../other.txt')).toThrow('path traversal');
      });
      it('should reject invalid inputs', () => {
        expect(() => mockValidateFilePath('')).toThrow('Invalid file path');
        expect(() => mockValidateFilePath(null)).toThrow('Invalid file path');
        expect(() => mockValidateFilePath(123)).toThrow('Invalid file path');
        expect(() => mockValidateFilePath({})).toThrow('Invalid file path');
      });
      it('should reject oversized paths', () => {
        const longPath = 'a'.repeat(300);
        expect(() => mockValidateFilePath(longPath)).toThrow('File path too long');
      });
      it('should accept valid file paths', () => {
        expect(() => mockValidateFilePath('C:\\Documents\\file.pdf')).not.toThrow();
        expect(() => mockValidateFilePath('/home/user/document.pdf')).not.toThrow();
        expect(() => mockValidateFilePath('document.pdf')).not.toThrow();
      });
    });
    describe('File Data Validation', () => {
      it('should reject missing data', () => {
        expect(() => mockValidateFileData(null)).toThrow('No file data provided');
        expect(() => mockValidateFileData(undefined)).toThrow('No file data provided');
        expect(() => mockValidateFileData('')).toThrow('No file data provided');
      });
      it('should reject oversized files', () => {
        const largeData = {
          byteLength: 200 * 1024 * 1024
        }; // 200MB
        expect(() => mockValidateFileData(largeData)).toThrow('File too large');
      });
      it('should accept valid file data', () => {
        const validData = {
          byteLength: 1024
        }; // 1KB
        expect(() => mockValidateFileData(validData)).not.toThrow();
        const mediumData = {
          byteLength: 50 * 1024 * 1024
        }; // 50MB
        expect(() => mockValidateFileData(mediumData)).not.toThrow();
      });
    });
    describe('Filename Sanitization', () => {
      const sanitizeFilename = filename => {
        if (!filename || typeof filename !== 'string') {
          return 'document.pdf';
        }
        let sanitized = filename.replace(/[<>:"/\\|?*]/g, '_').substring(0, 100);
        if (!sanitized.endsWith('.pdf')) {
          sanitized += '.pdf';
        }
        return sanitized;
      };
      it('should remove dangerous characters', () => {
        expect(sanitizeFilename('file<>:"/\\|?*.pdf')).toBe('file_________.pdf');
        expect(sanitizeFilename('con.pdf')).toBe('con.pdf');
        expect(sanitizeFilename('NUL')).toBe('NUL.pdf');
      });
      it('should handle long filenames', () => {
        const longName = 'a'.repeat(200) + '.pdf';
        const result = sanitizeFilename(longName);
        expect(result.length).toBeLessThanOrEqual(104); // 100 chars + '.pdf'
        expect(result.endsWith('.pdf')).toBe(true);
      });
      it('should add PDF extension if missing', () => {
        expect(sanitizeFilename('document')).toBe('document.pdf');
        expect(sanitizeFilename('file.txt')).toBe('file.txt.pdf');
      });
      it('should handle edge cases', () => {
        expect(sanitizeFilename('')).toBe('document.pdf');
        expect(sanitizeFilename(null)).toBe('document.pdf');
        expect(sanitizeFilename(undefined)).toBe('document.pdf');
      });
    });
  });
  describe('XSS Prevention', () => {
    const sanitizeHTML = input => {
      if (typeof input !== 'string') return '';
      return input.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#x27;').replace(/\//g, '&#x2F;');
    };
    it('should escape HTML characters', () => {
      const malicious = '<script>alert("xss")</script>';
      const sanitized = sanitizeHTML(malicious);
      expect(sanitized).not.toContain('<script>');
      expect(sanitized).toContain('&lt;script&gt;');
    });
    it('should handle quotes and slashes', () => {
      const input = `"';/`;
      const result = sanitizeHTML(input);
      expect(result).toBe('&quot;&#x27;;&#x2F;');
    });
    it('should handle non-string inputs', () => {
      expect(sanitizeHTML(null)).toBe('');
      expect(sanitizeHTML(undefined)).toBe('');
      expect(sanitizeHTML(123)).toBe('');
    });
  });
  describe('Rate Limiting', () => {
    class RateLimiter {
      constructor() {
        this.attempts = new Map();
        this.maxAttempts = 5;
        this.windowMs = 60000; // 1 minute
      }
      isRateLimited(identifier) {
        const now = Date.now();
        const attempts = this.attempts.get(identifier) || [];

        // Remove old attempts outside the window
        const recentAttempts = attempts.filter(time => now - time < this.windowMs);

        // Update the attempts array
        this.attempts.set(identifier, recentAttempts);
        return recentAttempts.length >= this.maxAttempts;
      }
      recordAttempt(identifier) {
        const attempts = this.attempts.get(identifier) || [];
        attempts.push(Date.now());
        this.attempts.set(identifier, attempts);
      }
    }
    it('should allow requests under the limit', () => {
      const limiter = new RateLimiter();
      const id = 'test-user';
      for (let i = 0; i < 4; i++) {
        expect(limiter.isRateLimited(id)).toBe(false);
        limiter.recordAttempt(id);
      }
    });
    it('should block requests over the limit', () => {
      const limiter = new RateLimiter();
      const id = 'test-user';

      // Make 5 attempts (at the limit)
      for (let i = 0; i < 5; i++) {
        limiter.recordAttempt(id);
      }
      expect(limiter.isRateLimited(id)).toBe(true);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsIm1vY2tWYWxpZGF0ZVNlbmRlciIsImV2ZW50Iiwic2VuZGVyIiwiRXJyb3IiLCJtb2NrVmFsaWRhdGVGaWxlUGF0aCIsImZpbGVQYXRoIiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJtb2NrVmFsaWRhdGVGaWxlRGF0YSIsImRhdGEiLCJieXRlTGVuZ3RoIiwiaXQiLCJleHBlY3QiLCJ0b1Rocm93IiwidW5kZWZpbmVkIiwidmFsaWRFdmVudCIsImlzRGVzdHJveWVkIiwibm90IiwibG9uZ1BhdGgiLCJyZXBlYXQiLCJsYXJnZURhdGEiLCJ2YWxpZERhdGEiLCJtZWRpdW1EYXRhIiwic2FuaXRpemVGaWxlbmFtZSIsImZpbGVuYW1lIiwic2FuaXRpemVkIiwicmVwbGFjZSIsInN1YnN0cmluZyIsImVuZHNXaXRoIiwidG9CZSIsImxvbmdOYW1lIiwicmVzdWx0IiwidG9CZUxlc3NUaGFuT3JFcXVhbCIsInNhbml0aXplSFRNTCIsImlucHV0IiwibWFsaWNpb3VzIiwidG9Db250YWluIiwiUmF0ZUxpbWl0ZXIiLCJjb25zdHJ1Y3RvciIsImF0dGVtcHRzIiwiTWFwIiwibWF4QXR0ZW1wdHMiLCJ3aW5kb3dNcyIsImlzUmF0ZUxpbWl0ZWQiLCJpZGVudGlmaWVyIiwibm93IiwiRGF0ZSIsImdldCIsInJlY2VudEF0dGVtcHRzIiwiZmlsdGVyIiwidGltZSIsInNldCIsInJlY29yZEF0dGVtcHQiLCJwdXNoIiwibGltaXRlciIsImlkIiwiaSJdLCJzb3VyY2VzIjpbInZhbGlkYXRpb24udGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNlY3VyaXR5IFZhbGlkYXRpb24gVGVzdHNcbiAqIFRlc3RzIGlucHV0IHZhbGlkYXRpb24gYW5kIHNlY3VyaXR5IG1lYXN1cmVzXG4gKi9cblxuZGVzY3JpYmUoJ1NlY3VyaXR5IFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdJbnB1dCBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIC8vIFRlc3QgdGhlIHZhbGlkYXRpb24gZnVuY3Rpb25zIGZyb20gbWFpbi5qc1xuICAgIGNvbnN0IG1vY2tWYWxpZGF0ZVNlbmRlciA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKCFldmVudC5zZW5kZXIpIHRocm93IG5ldyBFcnJvcignTm8gc2VuZGVyJyk7XG4gICAgICAvLyBTaW11bGF0ZSB2YWxpZGF0aW9uIGxvZ2ljXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgY29uc3QgbW9ja1ZhbGlkYXRlRmlsZVBhdGggPSAoZmlsZVBhdGgpID0+IHtcbiAgICAgIGlmICghZmlsZVBhdGggfHwgdHlwZW9mIGZpbGVQYXRoICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZmlsZSBwYXRoJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChmaWxlUGF0aC5sZW5ndGggPiAyNjApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIHBhdGggdG9vIGxvbmcnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKCcuLicpIHx8IGZpbGVQYXRoLmluY2x1ZGVzKCd+JykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGZpbGUgcGF0aCAtIHBhdGggdHJhdmVyc2FsIGRldGVjdGVkJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmaWxlUGF0aDtcbiAgICB9O1xuXG4gICAgY29uc3QgbW9ja1ZhbGlkYXRlRmlsZURhdGEgPSAoZGF0YSkgPT4ge1xuICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZmlsZSBkYXRhIHByb3ZpZGVkJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChkYXRhLmJ5dGVMZW5ndGggPiAxMDAgKiAxMDI0ICogMTAyNCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpbGUgdG9vIGxhcmdlIChtYXggMTAwTUIpJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH07XG5cbiAgICBkZXNjcmliZSgnU2VuZGVyIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIHNlbmRlcicsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZVNlbmRlcih7fSkpLnRvVGhyb3coJ05vIHNlbmRlcicpO1xuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlU2VuZGVyKG51bGwpKS50b1Rocm93KCdObyBzZW5kZXInKTtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZVNlbmRlcih1bmRlZmluZWQpKS50b1Rocm93KCdObyBzZW5kZXInKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWxpZCBzZW5kZXInLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkRXZlbnQgPSB7IHNlbmRlcjogeyBpc0Rlc3Ryb3llZDogKCkgPT4gZmFsc2UgfSB9O1xuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlU2VuZGVyKHZhbGlkRXZlbnQpKS5ub3QudG9UaHJvdygpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnRmlsZSBQYXRoIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHJlamVjdCBwYXRoIHRyYXZlcnNhbCBhdHRlbXB0cycsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZUZpbGVQYXRoKCcuLi8uLi8uLi9ldGMvcGFzc3dkJykpLnRvVGhyb3coJ3BhdGggdHJhdmVyc2FsJyk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlUGF0aCgnLi5cXFxcd2luZG93c1xcXFxzeXN0ZW0zMicpKS50b1Rocm93KCdwYXRoIHRyYXZlcnNhbCcpO1xuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlRmlsZVBhdGgoJ34vLnNzaC9pZF9yc2EnKSkudG9UaHJvdygncGF0aCB0cmF2ZXJzYWwnKTtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZUZpbGVQYXRoKCdmaWxlLi4vLi4vb3RoZXIudHh0JykpLnRvVGhyb3coJ3BhdGggdHJhdmVyc2FsJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBpbnB1dHMnLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlUGF0aCgnJykpLnRvVGhyb3coJ0ludmFsaWQgZmlsZSBwYXRoJyk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlUGF0aChudWxsKSkudG9UaHJvdygnSW52YWxpZCBmaWxlIHBhdGgnKTtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZUZpbGVQYXRoKDEyMykpLnRvVGhyb3coJ0ludmFsaWQgZmlsZSBwYXRoJyk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlUGF0aCh7fSkpLnRvVGhyb3coJ0ludmFsaWQgZmlsZSBwYXRoJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZWplY3Qgb3ZlcnNpemVkIHBhdGhzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBsb25nUGF0aCA9ICdhJy5yZXBlYXQoMzAwKTtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZUZpbGVQYXRoKGxvbmdQYXRoKSkudG9UaHJvdygnRmlsZSBwYXRoIHRvbyBsb25nJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBhY2NlcHQgdmFsaWQgZmlsZSBwYXRocycsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZUZpbGVQYXRoKCdDOlxcXFxEb2N1bWVudHNcXFxcZmlsZS5wZGYnKSkubm90LnRvVGhyb3coKTtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZUZpbGVQYXRoKCcvaG9tZS91c2VyL2RvY3VtZW50LnBkZicpKS5ub3QudG9UaHJvdygpO1xuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlRmlsZVBhdGgoJ2RvY3VtZW50LnBkZicpKS5ub3QudG9UaHJvdygpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnRmlsZSBEYXRhIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgICBpdCgnc2hvdWxkIHJlamVjdCBtaXNzaW5nIGRhdGEnLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlRGF0YShudWxsKSkudG9UaHJvdygnTm8gZmlsZSBkYXRhIHByb3ZpZGVkJyk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlRGF0YSh1bmRlZmluZWQpKS50b1Rocm93KCdObyBmaWxlIGRhdGEgcHJvdmlkZWQnKTtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZUZpbGVEYXRhKCcnKSkudG9UaHJvdygnTm8gZmlsZSBkYXRhIHByb3ZpZGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCByZWplY3Qgb3ZlcnNpemVkIGZpbGVzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBsYXJnZURhdGEgPSB7IGJ5dGVMZW5ndGg6IDIwMCAqIDEwMjQgKiAxMDI0IH07IC8vIDIwME1CXG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlRGF0YShsYXJnZURhdGEpKS50b1Rocm93KCdGaWxlIHRvbyBsYXJnZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWNjZXB0IHZhbGlkIGZpbGUgZGF0YScsICgpID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWREYXRhID0geyBieXRlTGVuZ3RoOiAxMDI0IH07IC8vIDFLQlxuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlRmlsZURhdGEodmFsaWREYXRhKSkubm90LnRvVGhyb3coKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG1lZGl1bURhdGEgPSB7IGJ5dGVMZW5ndGg6IDUwICogMTAyNCAqIDEwMjQgfTsgLy8gNTBNQlxuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlRmlsZURhdGEobWVkaXVtRGF0YSkpLm5vdC50b1Rocm93KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdGaWxlbmFtZSBTYW5pdGl6YXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBzYW5pdGl6ZUZpbGVuYW1lID0gKGZpbGVuYW1lKSA9PiB7XG4gICAgICAgIGlmICghZmlsZW5hbWUgfHwgdHlwZW9mIGZpbGVuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJldHVybiAnZG9jdW1lbnQucGRmJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbGV0IHNhbml0aXplZCA9IGZpbGVuYW1lLnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCAnXycpLnN1YnN0cmluZygwLCAxMDApO1xuICAgICAgICBpZiAoIXNhbml0aXplZC5lbmRzV2l0aCgnLnBkZicpKSB7XG4gICAgICAgICAgc2FuaXRpemVkICs9ICcucGRmJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2FuaXRpemVkO1xuICAgICAgfTtcblxuICAgICAgaXQoJ3Nob3VsZCByZW1vdmUgZGFuZ2Vyb3VzIGNoYXJhY3RlcnMnLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzYW5pdGl6ZUZpbGVuYW1lKCdmaWxlPD46XCIvXFxcXHw/Ki5wZGYnKSkudG9CZSgnZmlsZV9fX19fX19fXy5wZGYnKTtcbiAgICAgICAgZXhwZWN0KHNhbml0aXplRmlsZW5hbWUoJ2Nvbi5wZGYnKSkudG9CZSgnY29uLnBkZicpO1xuICAgICAgICBleHBlY3Qoc2FuaXRpemVGaWxlbmFtZSgnTlVMJykpLnRvQmUoJ05VTC5wZGYnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGhhbmRsZSBsb25nIGZpbGVuYW1lcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgbG9uZ05hbWUgPSAnYScucmVwZWF0KDIwMCkgKyAnLnBkZic7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHNhbml0aXplRmlsZW5hbWUobG9uZ05hbWUpO1xuICAgICAgICBleHBlY3QocmVzdWx0Lmxlbmd0aCkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDQpOyAvLyAxMDAgY2hhcnMgKyAnLnBkZidcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lbmRzV2l0aCgnLnBkZicpKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWRkIFBERiBleHRlbnNpb24gaWYgbWlzc2luZycsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNhbml0aXplRmlsZW5hbWUoJ2RvY3VtZW50JykpLnRvQmUoJ2RvY3VtZW50LnBkZicpO1xuICAgICAgICBleHBlY3Qoc2FuaXRpemVGaWxlbmFtZSgnZmlsZS50eHQnKSkudG9CZSgnZmlsZS50eHQucGRmJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZWRnZSBjYXNlcycsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNhbml0aXplRmlsZW5hbWUoJycpKS50b0JlKCdkb2N1bWVudC5wZGYnKTtcbiAgICAgICAgZXhwZWN0KHNhbml0aXplRmlsZW5hbWUobnVsbCkpLnRvQmUoJ2RvY3VtZW50LnBkZicpO1xuICAgICAgICBleHBlY3Qoc2FuaXRpemVGaWxlbmFtZSh1bmRlZmluZWQpKS50b0JlKCdkb2N1bWVudC5wZGYnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnWFNTIFByZXZlbnRpb24nLCAoKSA9PiB7XG4gICAgY29uc3Qgc2FuaXRpemVIVE1MID0gKGlucHV0KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykgcmV0dXJuICcnO1xuICAgICAgXG4gICAgICByZXR1cm4gaW5wdXRcbiAgICAgICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxuICAgICAgICAucmVwbGFjZSgvPi9nLCAnJmd0OycpXG4gICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAgICAgLnJlcGxhY2UoLycvZywgJyYjeDI3OycpXG4gICAgICAgIC5yZXBsYWNlKC9cXC8vZywgJyYjeDJGOycpO1xuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIGVzY2FwZSBIVE1MIGNoYXJhY3RlcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtYWxpY2lvdXMgPSAnPHNjcmlwdD5hbGVydChcInhzc1wiKTwvc2NyaXB0Pic7XG4gICAgICBjb25zdCBzYW5pdGl6ZWQgPSBzYW5pdGl6ZUhUTUwobWFsaWNpb3VzKTtcbiAgICAgIGV4cGVjdChzYW5pdGl6ZWQpLm5vdC50b0NvbnRhaW4oJzxzY3JpcHQ+Jyk7XG4gICAgICBleHBlY3Qoc2FuaXRpemVkKS50b0NvbnRhaW4oJyZsdDtzY3JpcHQmZ3Q7Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBxdW90ZXMgYW5kIHNsYXNoZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnB1dCA9IGBcIic7L2A7XG4gICAgICBjb25zdCByZXN1bHQgPSBzYW5pdGl6ZUhUTUwoaW5wdXQpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnJnF1b3Q7JiN4Mjc7OyYjeDJGOycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbm9uLXN0cmluZyBpbnB1dHMnLCAoKSA9PiB7XG4gICAgICBleHBlY3Qoc2FuaXRpemVIVE1MKG51bGwpKS50b0JlKCcnKTtcbiAgICAgIGV4cGVjdChzYW5pdGl6ZUhUTUwodW5kZWZpbmVkKSkudG9CZSgnJyk7XG4gICAgICBleHBlY3Qoc2FuaXRpemVIVE1MKDEyMykpLnRvQmUoJycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmF0ZSBMaW1pdGluZycsICgpID0+IHtcbiAgICBjbGFzcyBSYXRlTGltaXRlciB7XG4gICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5hdHRlbXB0cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5tYXhBdHRlbXB0cyA9IDU7XG4gICAgICAgIHRoaXMud2luZG93TXMgPSA2MDAwMDsgLy8gMSBtaW51dGVcbiAgICAgIH1cblxuICAgICAgaXNSYXRlTGltaXRlZChpZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGF0dGVtcHRzID0gdGhpcy5hdHRlbXB0cy5nZXQoaWRlbnRpZmllcikgfHwgW107XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgb2xkIGF0dGVtcHRzIG91dHNpZGUgdGhlIHdpbmRvd1xuICAgICAgICBjb25zdCByZWNlbnRBdHRlbXB0cyA9IGF0dGVtcHRzLmZpbHRlcih0aW1lID0+IG5vdyAtIHRpbWUgPCB0aGlzLndpbmRvd01zKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgYXR0ZW1wdHMgYXJyYXlcbiAgICAgICAgdGhpcy5hdHRlbXB0cy5zZXQoaWRlbnRpZmllciwgcmVjZW50QXR0ZW1wdHMpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlY2VudEF0dGVtcHRzLmxlbmd0aCA+PSB0aGlzLm1heEF0dGVtcHRzO1xuICAgICAgfVxuXG4gICAgICByZWNvcmRBdHRlbXB0KGlkZW50aWZpZXIpIHtcbiAgICAgICAgY29uc3QgYXR0ZW1wdHMgPSB0aGlzLmF0dGVtcHRzLmdldChpZGVudGlmaWVyKSB8fCBbXTtcbiAgICAgICAgYXR0ZW1wdHMucHVzaChEYXRlLm5vdygpKTtcbiAgICAgICAgdGhpcy5hdHRlbXB0cy5zZXQoaWRlbnRpZmllciwgYXR0ZW1wdHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGl0KCdzaG91bGQgYWxsb3cgcmVxdWVzdHMgdW5kZXIgdGhlIGxpbWl0JywgKCkgPT4ge1xuICAgICAgY29uc3QgbGltaXRlciA9IG5ldyBSYXRlTGltaXRlcigpO1xuICAgICAgY29uc3QgaWQgPSAndGVzdC11c2VyJztcbiAgICAgIFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgZXhwZWN0KGxpbWl0ZXIuaXNSYXRlTGltaXRlZChpZCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICBsaW1pdGVyLnJlY29yZEF0dGVtcHQoaWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBibG9jayByZXF1ZXN0cyBvdmVyIHRoZSBsaW1pdCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGxpbWl0ZXIgPSBuZXcgUmF0ZUxpbWl0ZXIoKTtcbiAgICAgIGNvbnN0IGlkID0gJ3Rlc3QtdXNlcic7XG4gICAgICBcbiAgICAgIC8vIE1ha2UgNSBhdHRlbXB0cyAoYXQgdGhlIGxpbWl0KVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgbGltaXRlci5yZWNvcmRBdHRlbXB0KGlkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZXhwZWN0KGxpbWl0ZXIuaXNSYXRlTGltaXRlZChpZCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQUEsUUFBUSxDQUFDLHFCQUFxQixFQUFFLE1BQU07RUFDcENBLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxNQUFNO0lBQ2pDO0lBQ0EsTUFBTUMsa0JBQWtCLEdBQUlDLEtBQUssSUFBSztNQUNwQyxJQUFJLENBQUNBLEtBQUssQ0FBQ0MsTUFBTSxFQUFFLE1BQU0sSUFBSUMsS0FBSyxDQUFDLFdBQVcsQ0FBQztNQUMvQztNQUNBLE9BQU8sSUFBSTtJQUNiLENBQUM7SUFFRCxNQUFNQyxvQkFBb0IsR0FBSUMsUUFBUSxJQUFLO01BQ3pDLElBQUksQ0FBQ0EsUUFBUSxJQUFJLE9BQU9BLFFBQVEsS0FBSyxRQUFRLEVBQUU7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