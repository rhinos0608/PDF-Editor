2a1d2177452aac18ffc8652b11bd0ef0
/**
 * Security Validation Tests
 * Tests input validation and security measures
 */

describe('Security Validation', () => {
  describe('Input Validation', () => {
    // Test the validation functions from main.js
    const mockValidateSender = event => {
      if (!event || !event.sender) throw new Error('No sender');
      // Simulate validation logic
      return true;
    };
    const mockValidateFilePath = filePath => {
      if (!filePath || typeof filePath !== 'string') {
        throw new Error('Invalid file path');
      }
      if (filePath.length > 260) {
        throw new Error('File path too long');
      }
      if (filePath.includes('..') || filePath.includes('~')) {
        throw new Error('Invalid file path - path traversal detected');
      }
      return filePath;
    };
    const mockValidateFileData = data => {
      if (!data) {
        throw new Error('No file data provided');
      }
      if (data.byteLength > 100 * 1024 * 1024) {
        throw new Error('File too large (max 100MB)');
      }
      return data;
    };
    describe('Sender Validation', () => {
      it('should reject invalid sender', () => {
        expect(() => mockValidateSender({})).toThrow('No sender');
        expect(() => mockValidateSender(null)).toThrow('No sender');
        expect(() => mockValidateSender(undefined)).toThrow('No sender');
      });
      it('should accept valid sender', () => {
        const validEvent = {
          sender: {
            isDestroyed: () => false
          }
        };
        expect(() => mockValidateSender(validEvent)).not.toThrow();
      });
    });
    describe('File Path Validation', () => {
      it('should reject path traversal attempts', () => {
        expect(() => mockValidateFilePath('../../../etc/passwd')).toThrow('path traversal');
        expect(() => mockValidateFilePath('..\\windows\\system32')).toThrow('path traversal');
        expect(() => mockValidateFilePath('~/.ssh/id_rsa')).toThrow('path traversal');
        expect(() => mockValidateFilePath('file../../other.txt')).toThrow('path traversal');
      });
      it('should reject invalid inputs', () => {
        expect(() => mockValidateFilePath('')).toThrow('Invalid file path');
        expect(() => mockValidateFilePath(null)).toThrow('Invalid file path');
        expect(() => mockValidateFilePath(123)).toThrow('Invalid file path');
        expect(() => mockValidateFilePath({})).toThrow('Invalid file path');
      });
      it('should reject oversized paths', () => {
        const longPath = 'a'.repeat(300);
        expect(() => mockValidateFilePath(longPath)).toThrow('File path too long');
      });
      it('should accept valid file paths', () => {
        expect(() => mockValidateFilePath('C:\\Documents\\file.pdf')).not.toThrow();
        expect(() => mockValidateFilePath('/home/user/document.pdf')).not.toThrow();
        expect(() => mockValidateFilePath('document.pdf')).not.toThrow();
      });
    });
    describe('File Data Validation', () => {
      it('should reject missing data', () => {
        expect(() => mockValidateFileData(null)).toThrow('No file data provided');
        expect(() => mockValidateFileData(undefined)).toThrow('No file data provided');
        expect(() => mockValidateFileData('')).toThrow('No file data provided');
      });
      it('should reject oversized files', () => {
        const largeData = {
          byteLength: 200 * 1024 * 1024
        }; // 200MB
        expect(() => mockValidateFileData(largeData)).toThrow('File too large');
      });
      it('should accept valid file data', () => {
        const validData = {
          byteLength: 1024
        }; // 1KB
        expect(() => mockValidateFileData(validData)).not.toThrow();
        const mediumData = {
          byteLength: 50 * 1024 * 1024
        }; // 50MB
        expect(() => mockValidateFileData(mediumData)).not.toThrow();
      });
    });
    describe('Filename Sanitization', () => {
      const sanitizeFilename = filename => {
        if (!filename || typeof filename !== 'string') {
          return 'document.pdf';
        }
        let sanitized = filename.replace(/[<>:"/\\|?*]/g, '_').substring(0, 100);
        if (!sanitized.endsWith('.pdf')) {
          sanitized += '.pdf';
        }
        return sanitized;
      };
      it('should remove dangerous characters', () => {
        expect(sanitizeFilename('file<>:"/\\|?*.pdf')).toBe('file_________.pdf');
        expect(sanitizeFilename('con.pdf')).toBe('con.pdf');
        expect(sanitizeFilename('NUL')).toBe('NUL.pdf');
      });
      it('should handle long filenames', () => {
        const longName = 'a'.repeat(200) + '.pdf';
        const result = sanitizeFilename(longName);
        expect(result.length).toBeLessThanOrEqual(104); // 100 chars + '.pdf'
        expect(result.endsWith('.pdf')).toBe(true);
      });
      it('should add PDF extension if missing', () => {
        expect(sanitizeFilename('document')).toBe('document.pdf');
        expect(sanitizeFilename('file.txt')).toBe('file.txt.pdf');
      });
      it('should handle edge cases', () => {
        expect(sanitizeFilename('')).toBe('document.pdf');
        expect(sanitizeFilename(null)).toBe('document.pdf');
        expect(sanitizeFilename(undefined)).toBe('document.pdf');
      });
    });
  });
  describe('XSS Prevention', () => {
    const sanitizeHTML = input => {
      if (typeof input !== 'string') return '';
      return input.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#x27;').replace(/\//g, '&#x2F;');
    };
    it('should escape HTML characters', () => {
      const malicious = '<script>alert("xss")</script>';
      const sanitized = sanitizeHTML(malicious);
      expect(sanitized).not.toContain('<script>');
      expect(sanitized).toContain('&lt;script&gt;');
    });
    it('should handle quotes and slashes', () => {
      const input = `"';/`;
      const result = sanitizeHTML(input);
      expect(result).toBe('&quot;&#x27;;&#x2F;');
    });
    it('should handle non-string inputs', () => {
      expect(sanitizeHTML(null)).toBe('');
      expect(sanitizeHTML(undefined)).toBe('');
      expect(sanitizeHTML(123)).toBe('');
    });
  });
  describe('Rate Limiting', () => {
    class RateLimiter {
      constructor() {
        this.attempts = new Map();
        this.maxAttempts = 5;
        this.windowMs = 60000; // 1 minute
      }
      isRateLimited(identifier) {
        const now = Date.now();
        const attempts = this.attempts.get(identifier) || [];

        // Remove old attempts outside the window
        const recentAttempts = attempts.filter(time => now - time < this.windowMs);

        // Update the attempts array
        this.attempts.set(identifier, recentAttempts);
        return recentAttempts.length >= this.maxAttempts;
      }
      recordAttempt(identifier) {
        const attempts = this.attempts.get(identifier) || [];
        attempts.push(Date.now());
        this.attempts.set(identifier, attempts);
      }
    }
    it('should allow requests under the limit', () => {
      const limiter = new RateLimiter();
      const id = 'test-user';
      for (let i = 0; i < 4; i++) {
        expect(limiter.isRateLimited(id)).toBe(false);
        limiter.recordAttempt(id);
      }
    });
    it('should block requests over the limit', () => {
      const limiter = new RateLimiter();
      const id = 'test-user';

      // Make 5 attempts (at the limit)
      for (let i = 0; i < 5; i++) {
        limiter.recordAttempt(id);
      }
      expect(limiter.isRateLimited(id)).toBe(true);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsIm1vY2tWYWxpZGF0ZVNlbmRlciIsImV2ZW50Iiwic2VuZGVyIiwiRXJyb3IiLCJtb2NrVmFsaWRhdGVGaWxlUGF0aCIsImZpbGVQYXRoIiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJtb2NrVmFsaWRhdGVGaWxlRGF0YSIsImRhdGEiLCJieXRlTGVuZ3RoIiwiaXQiLCJleHBlY3QiLCJ0b1Rocm93IiwidW5kZWZpbmVkIiwidmFsaWRFdmVudCIsImlzRGVzdHJveWVkIiwibm90IiwibG9uZ1BhdGgiLCJyZXBlYXQiLCJsYXJnZURhdGEiLCJ2YWxpZERhdGEiLCJtZWRpdW1EYXRhIiwic2FuaXRpemVGaWxlbmFtZSIsImZpbGVuYW1lIiwic2FuaXRpemVkIiwicmVwbGFjZSIsInN1YnN0cmluZyIsImVuZHNXaXRoIiwidG9CZSIsImxvbmdOYW1lIiwicmVzdWx0IiwidG9CZUxlc3NUaGFuT3JFcXVhbCIsInNhbml0aXplSFRNTCIsImlucHV0IiwibWFsaWNpb3VzIiwidG9Db250YWluIiwiUmF0ZUxpbWl0ZXIiLCJjb25zdHJ1Y3RvciIsImF0dGVtcHRzIiwiTWFwIiwibWF4QXR0ZW1wdHMiLCJ3aW5kb3dNcyIsImlzUmF0ZUxpbWl0ZWQiLCJpZGVudGlmaWVyIiwibm93IiwiRGF0ZSIsImdldCIsInJlY2VudEF0dGVtcHRzIiwiZmlsdGVyIiwidGltZSIsInNldCIsInJlY29yZEF0dGVtcHQiLCJwdXNoIiwibGltaXRlciIsImlkIiwiaSJdLCJzb3VyY2VzIjpbInZhbGlkYXRpb24udGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNlY3VyaXR5IFZhbGlkYXRpb24gVGVzdHNcbiAqIFRlc3RzIGlucHV0IHZhbGlkYXRpb24gYW5kIHNlY3VyaXR5IG1lYXN1cmVzXG4gKi9cblxuZGVzY3JpYmUoJ1NlY3VyaXR5IFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdJbnB1dCBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIC8vIFRlc3QgdGhlIHZhbGlkYXRpb24gZnVuY3Rpb25zIGZyb20gbWFpbi5qc1xuICAgIGNvbnN0IG1vY2tWYWxpZGF0ZVNlbmRlciA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKCFldmVudCB8fCAhZXZlbnQuc2VuZGVyKSB0aHJvdyBuZXcgRXJyb3IoJ05vIHNlbmRlcicpO1xuICAgICAgLy8gU2ltdWxhdGUgdmFsaWRhdGlvbiBsb2dpY1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIGNvbnN0IG1vY2tWYWxpZGF0ZUZpbGVQYXRoID0gKGZpbGVQYXRoKSA9PiB7XG4gICAgICBpZiAoIWZpbGVQYXRoIHx8IHR5cGVvZiBmaWxlUGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGZpbGUgcGF0aCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZmlsZVBhdGgubGVuZ3RoID4gMjYwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmlsZSBwYXRoIHRvbyBsb25nJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChmaWxlUGF0aC5pbmNsdWRlcygnLi4nKSB8fCBmaWxlUGF0aC5pbmNsdWRlcygnficpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBmaWxlIHBhdGggLSBwYXRoIHRyYXZlcnNhbCBkZXRlY3RlZCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZmlsZVBhdGg7XG4gICAgfTtcblxuICAgIGNvbnN0IG1vY2tWYWxpZGF0ZUZpbGVEYXRhID0gKGRhdGEpID0+IHtcbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGZpbGUgZGF0YSBwcm92aWRlZCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZGF0YS5ieXRlTGVuZ3RoID4gMTAwICogMTAyNCAqIDEwMjQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIHRvbyBsYXJnZSAobWF4IDEwME1CKScpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9O1xuXG4gICAgZGVzY3JpYmUoJ1NlbmRlciBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBzZW5kZXInLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVTZW5kZXIoe30pKS50b1Rocm93KCdObyBzZW5kZXInKTtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZVNlbmRlcihudWxsKSkudG9UaHJvdygnTm8gc2VuZGVyJyk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVTZW5kZXIodW5kZWZpbmVkKSkudG9UaHJvdygnTm8gc2VuZGVyJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBhY2NlcHQgdmFsaWQgc2VuZGVyJywgKCkgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZEV2ZW50ID0geyBzZW5kZXI6IHsgaXNEZXN0cm95ZWQ6ICgpID0+IGZhbHNlIH0gfTtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZVNlbmRlcih2YWxpZEV2ZW50KSkubm90LnRvVGhyb3coKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0ZpbGUgUGF0aCBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCByZWplY3QgcGF0aCB0cmF2ZXJzYWwgYXR0ZW1wdHMnLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlUGF0aCgnLi4vLi4vLi4vZXRjL3Bhc3N3ZCcpKS50b1Rocm93KCdwYXRoIHRyYXZlcnNhbCcpO1xuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlRmlsZVBhdGgoJy4uXFxcXHdpbmRvd3NcXFxcc3lzdGVtMzInKSkudG9UaHJvdygncGF0aCB0cmF2ZXJzYWwnKTtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZUZpbGVQYXRoKCd+Ly5zc2gvaWRfcnNhJykpLnRvVGhyb3coJ3BhdGggdHJhdmVyc2FsJyk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlUGF0aCgnZmlsZS4uLy4uL290aGVyLnR4dCcpKS50b1Rocm93KCdwYXRoIHRyYXZlcnNhbCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgaW5wdXRzJywgKCkgPT4ge1xuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlRmlsZVBhdGgoJycpKS50b1Rocm93KCdJbnZhbGlkIGZpbGUgcGF0aCcpO1xuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlRmlsZVBhdGgobnVsbCkpLnRvVGhyb3coJ0ludmFsaWQgZmlsZSBwYXRoJyk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlUGF0aCgxMjMpKS50b1Rocm93KCdJbnZhbGlkIGZpbGUgcGF0aCcpO1xuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlRmlsZVBhdGgoe30pKS50b1Rocm93KCdJbnZhbGlkIGZpbGUgcGF0aCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmVqZWN0IG92ZXJzaXplZCBwYXRocycsICgpID0+IHtcbiAgICAgICAgY29uc3QgbG9uZ1BhdGggPSAnYScucmVwZWF0KDMwMCk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlUGF0aChsb25nUGF0aCkpLnRvVGhyb3coJ0ZpbGUgcGF0aCB0b28gbG9uZycpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYWNjZXB0IHZhbGlkIGZpbGUgcGF0aHMnLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlUGF0aCgnQzpcXFxcRG9jdW1lbnRzXFxcXGZpbGUucGRmJykpLm5vdC50b1Rocm93KCk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlUGF0aCgnL2hvbWUvdXNlci9kb2N1bWVudC5wZGYnKSkubm90LnRvVGhyb3coKTtcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZUZpbGVQYXRoKCdkb2N1bWVudC5wZGYnKSkubm90LnRvVGhyb3coKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0ZpbGUgRGF0YSBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgICAgaXQoJ3Nob3VsZCByZWplY3QgbWlzc2luZyBkYXRhJywgKCkgPT4ge1xuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlRmlsZURhdGEobnVsbCkpLnRvVGhyb3coJ05vIGZpbGUgZGF0YSBwcm92aWRlZCcpO1xuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlRmlsZURhdGEodW5kZWZpbmVkKSkudG9UaHJvdygnTm8gZmlsZSBkYXRhIHByb3ZpZGVkJyk7XG4gICAgICAgIGV4cGVjdCgoKSA9PiBtb2NrVmFsaWRhdGVGaWxlRGF0YSgnJykpLnRvVGhyb3coJ05vIGZpbGUgZGF0YSBwcm92aWRlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgcmVqZWN0IG92ZXJzaXplZCBmaWxlcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgbGFyZ2VEYXRhID0geyBieXRlTGVuZ3RoOiAyMDAgKiAxMDI0ICogMTAyNCB9OyAvLyAyMDBNQlxuICAgICAgICBleHBlY3QoKCkgPT4gbW9ja1ZhbGlkYXRlRmlsZURhdGEobGFyZ2VEYXRhKSkudG9UaHJvdygnRmlsZSB0b28gbGFyZ2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWxpZCBmaWxlIGRhdGEnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkRGF0YSA9IHsgYnl0ZUxlbmd0aDogMTAyNCB9OyAvLyAxS0JcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZUZpbGVEYXRhKHZhbGlkRGF0YSkpLm5vdC50b1Rocm93KCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBtZWRpdW1EYXRhID0geyBieXRlTGVuZ3RoOiA1MCAqIDEwMjQgKiAxMDI0IH07IC8vIDUwTUJcbiAgICAgICAgZXhwZWN0KCgpID0+IG1vY2tWYWxpZGF0ZUZpbGVEYXRhKG1lZGl1bURhdGEpKS5ub3QudG9UaHJvdygpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnRmlsZW5hbWUgU2FuaXRpemF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2FuaXRpemVGaWxlbmFtZSA9IChmaWxlbmFtZSkgPT4ge1xuICAgICAgICBpZiAoIWZpbGVuYW1lIHx8IHR5cGVvZiBmaWxlbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXR1cm4gJ2RvY3VtZW50LnBkZic7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxldCBzYW5pdGl6ZWQgPSBmaWxlbmFtZS5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgJ18nKS5zdWJzdHJpbmcoMCwgMTAwKTtcbiAgICAgICAgaWYgKCFzYW5pdGl6ZWQuZW5kc1dpdGgoJy5wZGYnKSkge1xuICAgICAgICAgIHNhbml0aXplZCArPSAnLnBkZic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNhbml0aXplZDtcbiAgICAgIH07XG5cbiAgICAgIGl0KCdzaG91bGQgcmVtb3ZlIGRhbmdlcm91cyBjaGFyYWN0ZXJzJywgKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2FuaXRpemVGaWxlbmFtZSgnZmlsZTw+OlwiL1xcXFx8PyoucGRmJykpLnRvQmUoJ2ZpbGVfX19fX19fX18ucGRmJyk7XG4gICAgICAgIGV4cGVjdChzYW5pdGl6ZUZpbGVuYW1lKCdjb24ucGRmJykpLnRvQmUoJ2Nvbi5wZGYnKTtcbiAgICAgICAgZXhwZWN0KHNhbml0aXplRmlsZW5hbWUoJ05VTCcpKS50b0JlKCdOVUwucGRmJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbG9uZyBmaWxlbmFtZXMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGxvbmdOYW1lID0gJ2EnLnJlcGVhdCgyMDApICsgJy5wZGYnO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBzYW5pdGl6ZUZpbGVuYW1lKGxvbmdOYW1lKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5sZW5ndGgpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTA0KTsgLy8gMTAwIGNoYXJzICsgJy5wZGYnXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZW5kc1dpdGgoJy5wZGYnKSkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGFkZCBQREYgZXh0ZW5zaW9uIGlmIG1pc3NpbmcnLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzYW5pdGl6ZUZpbGVuYW1lKCdkb2N1bWVudCcpKS50b0JlKCdkb2N1bWVudC5wZGYnKTtcbiAgICAgICAgZXhwZWN0KHNhbml0aXplRmlsZW5hbWUoJ2ZpbGUudHh0JykpLnRvQmUoJ2ZpbGUudHh0LnBkZicpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVkZ2UgY2FzZXMnLCAoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzYW5pdGl6ZUZpbGVuYW1lKCcnKSkudG9CZSgnZG9jdW1lbnQucGRmJyk7XG4gICAgICAgIGV4cGVjdChzYW5pdGl6ZUZpbGVuYW1lKG51bGwpKS50b0JlKCdkb2N1bWVudC5wZGYnKTtcbiAgICAgICAgZXhwZWN0KHNhbml0aXplRmlsZW5hbWUodW5kZWZpbmVkKSkudG9CZSgnZG9jdW1lbnQucGRmJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1hTUyBQcmV2ZW50aW9uJywgKCkgPT4ge1xuICAgIGNvbnN0IHNhbml0aXplSFRNTCA9IChpbnB1dCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycpIHJldHVybiAnJztcbiAgICAgIFxuICAgICAgcmV0dXJuIGlucHV0XG4gICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcbiAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKVxuICAgICAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXG4gICAgICAgIC5yZXBsYWNlKC8nL2csICcmI3gyNzsnKVxuICAgICAgICAucmVwbGFjZSgvXFwvL2csICcmI3gyRjsnKTtcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCBlc2NhcGUgSFRNTCBjaGFyYWN0ZXJzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWFsaWNpb3VzID0gJzxzY3JpcHQ+YWxlcnQoXCJ4c3NcIik8L3NjcmlwdD4nO1xuICAgICAgY29uc3Qgc2FuaXRpemVkID0gc2FuaXRpemVIVE1MKG1hbGljaW91cyk7XG4gICAgICBleHBlY3Qoc2FuaXRpemVkKS5ub3QudG9Db250YWluKCc8c2NyaXB0PicpO1xuICAgICAgZXhwZWN0KHNhbml0aXplZCkudG9Db250YWluKCcmbHQ7c2NyaXB0Jmd0OycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcXVvdGVzIGFuZCBzbGFzaGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5wdXQgPSBgXCInOy9gO1xuICAgICAgY29uc3QgcmVzdWx0ID0gc2FuaXRpemVIVE1MKGlucHV0KTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJyZxdW90OyYjeDI3OzsmI3gyRjsnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5vbi1zdHJpbmcgaW5wdXRzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHNhbml0aXplSFRNTChudWxsKSkudG9CZSgnJyk7XG4gICAgICBleHBlY3Qoc2FuaXRpemVIVE1MKHVuZGVmaW5lZCkpLnRvQmUoJycpO1xuICAgICAgZXhwZWN0KHNhbml0aXplSFRNTCgxMjMpKS50b0JlKCcnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JhdGUgTGltaXRpbmcnLCAoKSA9PiB7XG4gICAgY2xhc3MgUmF0ZUxpbWl0ZXIge1xuICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYXR0ZW1wdHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMubWF4QXR0ZW1wdHMgPSA1O1xuICAgICAgICB0aGlzLndpbmRvd01zID0gNjAwMDA7IC8vIDEgbWludXRlXG4gICAgICB9XG5cbiAgICAgIGlzUmF0ZUxpbWl0ZWQoaWRlbnRpZmllcikge1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBhdHRlbXB0cyA9IHRoaXMuYXR0ZW1wdHMuZ2V0KGlkZW50aWZpZXIpIHx8IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVtb3ZlIG9sZCBhdHRlbXB0cyBvdXRzaWRlIHRoZSB3aW5kb3dcbiAgICAgICAgY29uc3QgcmVjZW50QXR0ZW1wdHMgPSBhdHRlbXB0cy5maWx0ZXIodGltZSA9PiBub3cgLSB0aW1lIDwgdGhpcy53aW5kb3dNcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgdGhlIGF0dGVtcHRzIGFycmF5XG4gICAgICAgIHRoaXMuYXR0ZW1wdHMuc2V0KGlkZW50aWZpZXIsIHJlY2VudEF0dGVtcHRzKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZWNlbnRBdHRlbXB0cy5sZW5ndGggPj0gdGhpcy5tYXhBdHRlbXB0cztcbiAgICAgIH1cblxuICAgICAgcmVjb3JkQXR0ZW1wdChpZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IGF0dGVtcHRzID0gdGhpcy5hdHRlbXB0cy5nZXQoaWRlbnRpZmllcikgfHwgW107XG4gICAgICAgIGF0dGVtcHRzLnB1c2goRGF0ZS5ub3coKSk7XG4gICAgICAgIHRoaXMuYXR0ZW1wdHMuc2V0KGlkZW50aWZpZXIsIGF0dGVtcHRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IHJlcXVlc3RzIHVuZGVyIHRoZSBsaW1pdCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGxpbWl0ZXIgPSBuZXcgUmF0ZUxpbWl0ZXIoKTtcbiAgICAgIGNvbnN0IGlkID0gJ3Rlc3QtdXNlcic7XG4gICAgICBcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgIGV4cGVjdChsaW1pdGVyLmlzUmF0ZUxpbWl0ZWQoaWQpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgbGltaXRlci5yZWNvcmRBdHRlbXB0KGlkKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYmxvY2sgcmVxdWVzdHMgb3ZlciB0aGUgbGltaXQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsaW1pdGVyID0gbmV3IFJhdGVMaW1pdGVyKCk7XG4gICAgICBjb25zdCBpZCA9ICd0ZXN0LXVzZXInO1xuICAgICAgXG4gICAgICAvLyBNYWtlIDUgYXR0ZW1wdHMgKGF0IHRoZSBsaW1pdClcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgIGxpbWl0ZXIucmVjb3JkQXR0ZW1wdChpZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGV4cGVjdChsaW1pdGVyLmlzUmF0ZUxpbWl0ZWQoaWQpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUFBLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxNQUFNO0VBQ3BDQSxRQUFRLENBQUMsa0JBQWtCLEVBQUUsTUFBTTtJQUNqQztJQUNBLE1BQU1DLGtCQUFrQixHQUFJQyxLQUFLLElBQUs7TUFDcEMsSUFBSSxDQUFDQSxLQUFLLElBQUksQ0FBQ0EsS0FBSyxDQUFDQyxNQUFNLEVBQUUsTUFBTSxJQUFJQyxLQUFLLENBQUMsV0FBVyxDQUFDO01BQ3pEO01BQ0EsT0FBTyxJQUFJO0lBQ2IsQ0FBQztJQUVELE1BQU1DLG9CQUFvQixHQUFJQyxRQUFRLElBQUs7TUFDekMsSUFBSSxDQUFDQSxRQUFRLElBQUks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